(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{17:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n(2),u=n(0),c=n.n(u),o=n(16),i=n.n(o),l=n(4),m=n.n(l),s="/api/persons",f=(n(39),function(e){var t=e.message,n=e.positive,a=Object(u.useState)(!1),o=Object(r.a)(a,2),i=o[0],l=o[1];return Object(u.useEffect)((function(){t&&(l(!0),setTimeout((function(){l(!1)}),3e3))}),[t]),i?c.a.createElement("div",{className:"message".concat(n?" positive":" negative")},t):null}),d=function(e){var t=e.person,n=e.deleteItem,a=e.setMessage;return c.a.createElement("p",null,"Name: ",t.name," -- Number: ",t.number,c.a.createElement("button",{onClick:function(){return(e=t.id,m.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))).then(n(t.id)).catch((function(){a({message:"Didn't manage to remove number",positive:!1})}));var e}},"DELETE"))},b=function(e){var t=e.onSubmit,n=e.onNameChange,a=e.newName,r=e.onNumberChange,u=e.newNumber;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Add "),c.a.createElement("form",{onSubmit:t},c.a.createElement("div",null,"name: ",c.a.createElement("input",{onChange:n,value:a})),c.a.createElement("div",null,"number: ",c.a.createElement("input",{onChange:r,value:u})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add"))))},p=function(e){var t=e.persons,n=e.filter,a=e.deleteItem,r=e.setMessage;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Numbers"),t.filter((function(e){return e.name.toLowerCase().startsWith(n.toLowerCase())})).map((function(e){return c.a.createElement(d,{person:e,key:e.name,deleteItem:a,setMessage:r})})))},E=function(){var e=Object(u.useState)([{name:"Arto Hellas",number:"1231234"}]),t=Object(r.a)(e,2),n=t[0],o=t[1],i=Object(u.useState)(""),l=Object(r.a)(i,2),d=l[0],E=l[1],v=Object(u.useState)(""),h=Object(r.a)(v,2),g=h[0],j=h[1],O=Object(u.useState)(""),N=Object(r.a)(O,2),w=N[0],C=N[1],S=Object(u.useState)({message:"",positive:!0}),k=Object(r.a)(S,2),I=k[0],y=k[1];return Object(u.useEffect)((function(){m.a.get(s).then((function(e){return e.data})).then((function(e){y({message:"fetched all",positive:!0}),o(e)})).catch((function(){return alert("Error")}))}),[]),c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement("div",null,"Filter: ",c.a.createElement("input",{onChange:function(e){E(e.target.value)},value:d})),c.a.createElement(f,I),c.a.createElement(b,{onSubmit:function(e){e.preventDefault();var t,r,u,c={name:g,number:w},i=n.find((function(e){return e.name===g}));i?window.confirm("".concat(g," is already added to phonebook. Update?"))&&(t=i.id,r=c,m.a.put("".concat(s,"/").concat(t),r).then((function(e){return e.data}))).then((function(e){y({message:"Number changed",positive:!0}),o((function(t){return[].concat(Object(a.a)(t.filter((function(e){return e.id!==i.id}))),[e])}))})):((u=c,m.a.post(s,u).then((function(e){return e.data}))).then((function(e){y({message:"Number added",positive:!0}),o((function(t){return[].concat(Object(a.a)(t),[e])}))})).catch((function(){return alert("Error")})),j(""),C(""))},onNameChange:function(e){j(e.target.value)},newName:g,onNumberChange:function(e){C(e.target.value)},newNumber:w}),c.a.createElement(p,{persons:n,filter:d,deleteItem:function(e){return o((function(t){return t.filter((function(t){return t.id!==e}))}))},setMessage:y}))};i.a.render(c.a.createElement(E,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.9d71ce1c.chunk.js.map