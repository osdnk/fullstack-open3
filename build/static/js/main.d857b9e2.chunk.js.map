{"version":3,"sources":["phonebookService.js","Message.js","index.js"],"names":["baseUrl","Message","message","positive","useState","visible","setVisible","useEffect","setTimeout","className","Person","person","deleteItem","setMessage","name","number","onClick","id","axios","delete","then","response","data","catch","Form","onSubmit","onNameChange","newName","onNumberChange","newNumber","onChange","value","type","Persons","persons","filter","toLowerCase","startsWith","map","key","App","setPersons","setFilter","setNewName","setNewNumber","get","alert","event","target","preventDefault","object","newObject","foundItem","find","window","confirm","put","prev","p","post","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d857b9e2.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nexport const getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nexport const create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nexport const remove = id => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\n\nexport const update = (id, object) => {\n  const request = axios.put(`${baseUrl}/${id}`, object)\n  return request.then(response => response.data)\n}\n","import React, { useEffect, useState } from \"react\";\nimport \"./index.css\"\n\nconst Message = ({ message, positive }) => {\n  const [visible, setVisible] = useState(false)\n  useEffect(() => {\n    if (!message) {\n      return;\n    }\n    setVisible(true)\n    setTimeout(() => {\n      setVisible(false)\n    }, 3000);\n  }, [message])\n  return visible ?\n    <div className={`message${positive ? \" positive\" : \" negative\"}`}>{message}</div>\n    : null\n}\n\n\nexport default Message\n","import React, { useState, useEffect } from 'react'\nimport ReactDOM from \"react-dom\";\nimport { getAll, create, remove, update } from \"./phonebookService\";\nimport Message from \"./Message\";\n\nconst Person = ({ person, deleteItem, setMessage }) => {\n  const removeItem = () => remove(person.id).then(deleteItem(person.id)).catch(() => {\n    setMessage({ message: \"Didn't manage to remove number\", positive: false })\n  })\n  return (\n    <p>\n      Name: {person.name} -- Number: {person.number}\n      <button onClick={removeItem} >DELETE</button>\n    </p>\n  );\n};\n\n\nconst Form = ({ onSubmit, onNameChange, newName, onNumberChange, newNumber }) => (\n  <>\n    <h2>Add </h2>\n    <form onSubmit={onSubmit}>\n      <div>\n        name: <input onChange={onNameChange} value={newName} />\n      </div>\n      <div>\n        number: <input onChange={onNumberChange} value={newNumber} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  </>\n)\n\n\nconst Persons = ({ persons, filter, deleteItem, setMessage }) => (\n  <>\n    <h2>Numbers</h2>\n    {persons\n      .filter(({ name }) => name.toLowerCase().startsWith(filter.toLowerCase()))\n      .map((person) =>\n        <Person person={person} key={person.name} deleteItem={deleteItem} setMessage={setMessage} />\n      )}\n  </>\n)\n\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([\n    { name: 'Arto Hellas', number: \"1231234\" }\n  ])\n\n  const [ filter, setFilter ] = useState('');\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ message, setMessage ] = useState({ message: '', positive: true });\n\n  const onNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const onNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const onFilterChange = (event) => {\n    setFilter(event.target.value);\n  };\n\n  const deleteItem = id => setPersons(prev => prev.filter(p => p.id !== id))\n\n\n  const onSubmit = (event) => {\n    event.preventDefault();\n    const person = { name: newName, number: newNumber };\n    const foundItem = persons.find(({ name }) => name === newName)\n    if (foundItem) {\n      if (window.confirm(`${newName} is already added to phonebook. Update?`)) {\n        update(foundItem.id, person).then((data) => {\n          setMessage({ message: \"Number changed\", positive: true })\n          setPersons(prev => [...prev.filter(p => p.id !== foundItem.id), data])\n        })\n      }\n      return;\n    }\n    create(person).then((data) => {\n      setMessage({ message: \"Number added\", positive: true })\n      setPersons(prev => [...prev, data])\n    }).catch((error) => {\n      alert(`Error ${error.response.data.error}`)\n    })\n    setNewName(\"\")\n    setNewNumber(\"\")\n  }\n\n  const fetchPersons = () => {\n    getAll().then((data) => {\n      setMessage({ message: \"fetched all\", positive: true })\n      setPersons(data)\n    }).catch(() => alert(\"Error\"))\n  };\n\n\n  useEffect(fetchPersons, []);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <div>\n        Filter: <input onChange={onFilterChange} value={filter} />\n      </div>\n      <Message {...message} />\n\n      <Form {...{ onSubmit, onNameChange, newName, onNumberChange, newNumber }}/>\n      <Persons {...{ persons, filter, deleteItem, setMessage }} />\n\n    </div>\n  )\n}\n\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}